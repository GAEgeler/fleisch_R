{
    "collab_server" : "",
    "contents" : "---\ntitle: \"NOVANIMAL - Informationsplakat zur Fleischproduktion und zum Fleischkonsum in der Schweiz\"\nauthor: \"Flavio von Rickenbach\"\ndate: \"`r Sys.Date()`\"\noutput: html_notebook\npdf_document: default\nhtml_document: \n df_print: paged\n---\n\nIn diesem Dokument befinden sich Plots zur Fleischproduktion und zum Fleischkonsum in der Schweiz\n\n```{r}\n# load required packages\nlapply(c(\"readxl\",\"dplyr\",\"ggplot2\",\"readr\",\"tidyr\", \"here\"), FUN = function(X) {\n    do.call(\"library\", list(X))}) \n```\n\n\nFunction for coloring text with dark backgrounds\n```{r}\n## function to check if the background color is dark or not -------------------\n# source: https://trendct.org/2016/01/22/how-to-choose-a-label-color-to-contrast-with-background/\n# source 2: https://stackoverflow.com/questions/49716005/how-to-control-label-color-depending-on-fill-darkness-of-bars\n\nisDark <- function(color) {\n    (sum(grDevices::col2rgb(color) *c(299, 587,114))/1000 < 123)\n}\n```\n\n\ntwo of mythemes for plots\n\n```{r, echo=F}\n\n# my theme 1: for regular plots\nmytheme <- theme_bw()+ # definve theme for plot\n    theme(plot.title = element_text(size = 20, face = \"bold\"),\n          axis.text.x = element_text(size=20),\n          axis.text.y = element_text(size=20, face = \"plain\"),\n          legend.text = element_text(size = 20),\n          legend.title = element_text(size =20),\n          axis.title.y = element_text(size = 25, margin = margin(t = 0, r = 20, b = 0, l = 0)),\n          axis.title.x = element_text(size = 25,  margin = margin(t = 20, r = 0, b = 0, l = 0)),\n          plot.subtitle=element_text(margin=margin(b=15),size = 20),\n          plot.caption=element_text(margin=margin(t=15), face=\"italic\", size=20))\n\n\n### MY Theme 4: for plots with text of x axis 90 degrees -------------------\nmytheme4 <- theme_bw()+ # definve theme for plot\n    theme(plot.title = element_text(size = 20, face = \"bold\"),\n          axis.text.x = element_text(size=17,angle = 90, vjust=0.5, hjust=1),\n          axis.text.y = element_text(size=20, face = \"plain\"),\n          legend.text = element_text(size = 20),\n          legend.title = element_text(size =20),\n          axis.title.y = element_text(size = 25, margin = margin(t = 0, r = 20, b = 0, l = 0)),\n          axis.title.x = element_text(size = 25,  margin = margin(t = 20, r = 0, b = 0, l = 0)),\n          plot.subtitle=element_text(margin=margin(b=15),size = 8),\n          plot.caption=element_text(margin=margin(t=15), face=\"italic\", size=8))\n```\n\nFleischproduktion in der Schweiz von 1961 bis 2016 \n\n\nload data\n\n\n```{r, echo=FALSE}\ndf.tot <-  read_delim(here(\"data\", \"produktion_FAO_CH_ink_other_180725.csv\"), delim =';', locale = locale(encoding = 'ISO-8859-2'), col_types = cols(Value = col_number() ))\n\n```\n\nprepare data\n```{r}\ndf.cat <- subset(df.tot, !grepl(\"Meat\", Item))\ndf.cat$Item <- factor(df.cat$Item, ordered = T, levels = c(\"überige Tiere\", \"Schafe+Ziegen\",  \"Geflügel\", \"Rind\", \"Schwein\"))\n```\n\nBarplot Fleischangebot in der Schweiz von 1961 bis 2016 \n```{r}\nggplot(data=df.cat, aes(x = Year, y = Value, fill = Item, width=0.75))+\n  geom_bar(stat = 'identity')+\n  scale_y_continuous(name=\"Schlachtgewichtszahlen in Tonnen\", labels = function(x) format(x, big.mark = \"'\", scientific = FALSE))+\n  scale_x_continuous(breaks = seq(1961, 2016, 5), limits = c(1960, 2017))+\n  scale_fill_manual(\"Tierarten\", values = c(\"Schwein\"=\"#fad60d\",\"Rind\" = \"#c5b87c\",\"Geflügel\" = \"#262626\",\"Schafe+Ziegen\"=\"#008099\", \"überige Tiere\"=\"#e64d00\"))+\n  ggtitle(\"Fleischproduktion in der Schweiz 1961 – 2016\")+\n  mytheme\n  \n  ggsave(here(\"figs\", \"Bar_Produktion_Fleisch_CH.pdf\"),\n         width = 17,\n         height = 8,\n         dpi=600,\n         units=\"in\",\n         device=\"pdf\")\n\n \n```\nArea Fleischangebot in der Schweiz von 1961 bis 2016 \n```{r}\nggplot(data=df.cat, aes(x = Year, y = Value, fill = Item, width=0.75))+\n  geom_area(stat = 'identity')+\n  scale_y_continuous(name=\"Schlachtgewichtszahlen in Tonnen\", labels = function(x) format(x, big.mark = \"'\", scientific = FALSE))+\n  scale_x_continuous(breaks = seq(1961, 2016, 5), limits = c(1960, 2017))+\n  scale_fill_manual(\"Tierarten\", values = c(\"Schwein\"=\"#fad60d\",\"Rind\" = \"#c5b87c\",\"Geflügel\" = \"#262626\",\"Schafe+Ziegen\"=\"#008099\", \"überige Tiere\"=\"#e64d00\"))+\n  ggtitle(\"Fleischproduktion in der Schweiz 1961 – 2016\")+\n  mytheme\n  \n  ggsave(here(\"figs\", \"Area_Produktion_Fleisch_CH.pdf\"),\n         width = 17,\n         height = 8,\n         dpi=600,\n         units=\"in\",\n         device=\"pdf\")\n\n \n```\n2. Pro Kopf-Fleischangebot und -Fleischkonsum in der Schweiz \n\nAdd a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.\n\nWhen you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Ctrl+Shift+K* to preview the HTML file).\n",
    "created" : 1532504390942.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "1031654464",
    "id" : "E1231C2A",
    "lastKnownWriteTime" : 1532527047,
    "last_content_update" : 1532527048731,
    "path" : "//shared.zhaw.ch/shared$/pools/n/N-IUNR-Allgemein/Zentren/gruppe_NOVA/04_f&e/97103165041001_NOVANIMAL_arbeit/07_data/fleisch/fleisch_R/R/produktion_FAO_CH_180725_vori.Rmd",
    "project_path" : "R/produktion_FAO_CH_180725_vori.Rmd",
    "properties" : {
        "chunk_output_type" : "inline",
        "tempName" : "Untitled2"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}